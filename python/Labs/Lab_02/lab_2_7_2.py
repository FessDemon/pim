import re


def fixPunctuation(text):
    # Удаляем пробелы, встречающиеся более одного раза подряд
    text = re.sub(r"\s+", " ", text)

    # Добавляем пробел после знаков препинания (кроме открывающихся скобок)
    text = re.sub(r"([-.,;:?!])\s*", r"\1 ", text)

    # Заменяем многоточие на корректное
    text = re.sub(r"\.\s*\.\s*\.", "...", text)

    # Удаляем пробелы перед закрывающими скобками
    text = re.sub(r"\s+([\)\]\}])", r"\1", text)

    # Удаляем пробелы после открывающих скобок
    text = re.sub(r"([\(\[\{])\s+", r"\1", text)

    # Добавляем пробел перед открывающимися скобками
    text = re.sub(r"([\(\[\{])", r" \1", text)

    # Добавляем пробел после закрывающихся скобок
    text = re.sub(r"([\)\]\}])", r"\1 ", text)

    # Удаляем пробелы перед знаками препинания
    # (кроме тире и открывающихся скобок)
    text = re.sub(r"\s+([.,;:?!])", r"\1", text)

    # Удаляем лишние пробелы в конце строки
    text = text.strip()

    return text


# Пример использования
inputText = " kl ,ji !jj   :hjhj( ol )l .    .    .jk    ?jj    -hhj."
fixedText = fixPunctuation(inputText)
print(fixedText)
